<div class="space-y-4">
  <div class="bg-yellow-50 border border-yellow-200 rounded-md p-4 mb-4">
    <h4 class="text-sm font-medium text-yellow-900">BigQuery Connection</h4>
    <p class="mt-1 text-sm text-yellow-700">
      Connect to Google BigQuery to analyze your data warehouse.
    </p>
  </div>
  
  <div>
    <label for="bigquery_project_id" class="block text-sm font-medium text-gray-700">
      Project ID <span class="text-red-500">*</span>
    </label>
    <input type="text" name="data_source_connection[bigquery_project_id]" id="bigquery_project_id"
           class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm"
           placeholder="my-project-123456" required>
    <p class="mt-1 text-xs text-gray-500">Your Google Cloud project ID</p>
  </div>
  
  <div>
    <label for="bigquery_dataset" class="block text-sm font-medium text-gray-700">
      Dataset
    </label>
    <input type="text" name="data_source_connection[bigquery_dataset]" id="bigquery_dataset"
           class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm"
           placeholder="my_dataset">
    <p class="mt-1 text-xs text-gray-500">Default dataset to use (optional)</p>
  </div>
  
  <div>
    <label class="block text-sm font-medium text-gray-700 mb-2">
      Authentication Method
    </label>
    
    <div class="space-y-3">
      <div>
        <input type="radio" name="bigquery_auth_method" id="auth_service_account" value="service_account" checked
               class="focus:ring-blue-500 h-4 w-4 text-blue-600 border-gray-300">
        <label for="auth_service_account" class="ml-2 text-sm text-gray-700">
          Service Account JSON Key
        </label>
      </div>
      
      <div>
        <input type="radio" name="bigquery_auth_method" id="auth_api_key" value="api_key"
               class="focus:ring-blue-500 h-4 w-4 text-blue-600 border-gray-300">
        <label for="auth_api_key" class="ml-2 text-sm text-gray-700">
          API Key (Limited functionality)
        </label>
      </div>
      
      <div>
        <input type="radio" name="bigquery_auth_method" id="auth_default" value="default"
               class="focus:ring-blue-500 h-4 w-4 text-blue-600 border-gray-300">
        <label for="auth_default" class="ml-2 text-sm text-gray-700">
          Application Default Credentials
        </label>
      </div>
    </div>
  </div>
  
  <div id="service_account_section">
    <label for="bigquery_service_account_json" class="block text-sm font-medium text-gray-700">
      Service Account JSON <span class="text-red-500">*</span>
    </label>
    <textarea name="data_source_connection[bigquery_service_account_json]" 
              id="bigquery_service_account_json"
              rows="6"
              class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm"
              placeholder='Paste your service account JSON key here...
{
  "type": "service_account",
  "project_id": "your-project",
  "private_key_id": "...",
  "private_key": "...",
  ...
}'></textarea>
    <p class="mt-1 text-xs text-gray-500">
      Download from Google Cloud Console → IAM & Admin → Service Accounts
    </p>
  </div>
  
  <div id="api_key_section" class="hidden">
    <label for="bigquery_api_key" class="block text-sm font-medium text-gray-700">
      API Key <span class="text-red-500">*</span>
    </label>
    <input type="text" name="data_source_connection[bigquery_api_key]" id="bigquery_api_key"
           class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
    <p class="mt-1 text-xs text-gray-500">
      Create an API key in Google Cloud Console → APIs & Services → Credentials
    </p>
  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const authRadios = document.querySelectorAll('input[name="bigquery_auth_method"]');
  const serviceAccountSection = document.getElementById('service_account_section');
  const apiKeySection = document.getElementById('api_key_section');
  
  authRadios.forEach(radio => {
    radio.addEventListener('change', function() {
      serviceAccountSection.classList.add('hidden');
      apiKeySection.classList.add('hidden');
      
      if (this.value === 'service_account') {
        serviceAccountSection.classList.remove('hidden');
      } else if (this.value === 'api_key') {
        apiKeySection.classList.remove('hidden');
      }
    });
  });
});
</script>